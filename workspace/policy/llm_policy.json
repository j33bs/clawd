{
  "version": 2,
  "defaults": {
    "allowPaid": false,
    "preferLocal": true,
    "maxTokensPerRequest": 1024,
    "circuitBreaker": {
      "failureThreshold": 3,
      "cooldownSec": 900,
      "windowSec": 600,
      "failOn": [
        "request_http_429",
        "request_http_5xx",
        "request_timeout",
        "request_conn_error"
      ]
    }
  },
  "budgets": {
    "intents": {
      "itc_classify": {
        "dailyTokenBudget": 25000,
        "dailyCallBudget": 200,
        "maxCallsPerRun": 80
      },
      "coding": {
        "dailyTokenBudget": 50000,
        "dailyCallBudget": 200,
        "maxCallsPerRun": 50
      },
      "governance": {
        "dailyTokenBudget": 20000,
        "dailyCallBudget": 100,
        "maxCallsPerRun": 30
      },
      "security": {
        "dailyTokenBudget": 20000,
        "dailyCallBudget": 100,
        "maxCallsPerRun": 30
      }
    },
    "tiers": {
      "free": {
        "dailyTokenBudget": 100000,
        "dailyCallBudget": 1000
      },
      "auth": {
        "dailyTokenBudget": 50000,
        "dailyCallBudget": 200
      },
      "paid": {
        "dailyTokenBudget": 50000,
        "dailyCallBudget": 200
      }
    }
  },
  "providers": {
    "local_vllm_assistant": {
      "enabled": true,
      "paid": false,
      "tier": "free",
      "provider_id": "local_vllm",
      "type": "openai_compatible",
      "baseUrl": "http://127.0.0.1:8001/v1",
      "model": "local-assistant",
      "capabilities": {
        "context_window_tokens": 16384,
        "context_window_env": "LOCAL_ASSISTANT_CONTEXT_WINDOW_TOKENS"
      },
      "models": [
        {
          "id": "local-assistant",
          "maxInputChars": 4000,
          "tier": "large"
        }
      ]
    },
    "minimax_m25_lightning": {
      "enabled": true,
      "paid": false,
      "tier": "free",
      "type": "openai_compatible",
      "baseUrl": "https://api.minimax.chat/v1",
      "auth": {
        "type": "bearer_optional"
      },
      "models": [
        {
          "id": "minimax-portal/MiniMax-M2.5-Lightning",
          "maxInputChars": 4000
        }
      ]
    },
    "minimax_m25": {
      "enabled": true,
      "paid": false,
      "tier": "free",
      "type": "openai_compatible",
      "baseUrl": "https://api.minimax.chat/v1",
      "auth": {
        "type": "bearer_optional"
      },
      "models": [
        {
          "id": "minimax-portal/MiniMax-M2.5",
          "maxInputChars": 6000
        }
      ]
    },
    "openai_gpt52_chat": {
      "enabled": true,
      "paid": true,
      "tier": "paid",
      "type": "openai_compatible",
      "baseUrl": "https://api.openai.com/v1",
      "apiKeyEnv": "OPENAI_API_KEY",
      "models": [
        {
          "id": "gpt-5.2-chat-latest",
          "maxInputChars": 6000
        }
      ]
    },
    "openai_gpt53_codex": {
      "enabled": true,
      "paid": true,
      "tier": "paid",
      "type": "openai_compatible",
      "baseUrl": "https://api.openai.com/v1",
      "apiKeyEnv": "OPENAI_API_KEY",
      "models": [
        {
          "id": "gpt-5.3-codex",
          "maxInputChars": 6000
        }
      ]
    },
    "openai_gpt53_codex_spark": {
      "enabled": true,
      "paid": true,
      "tier": "paid",
      "type": "openai_compatible",
      "baseUrl": "https://api.openai.com/v1",
      "apiKeyEnv": "OPENAI_API_KEY",
      "models": [
        {
          "id": "gpt-5.3-codex-spark",
          "maxInputChars": 6000
        }
      ]
    },
    "local_vllm_coder": {
      "enabled": true,
      "paid": false,
      "tier": "free",
      "provider_id": "local_vllm",
      "type": "openai_compatible",
      "baseUrl": "http://127.0.0.1:8002/v1",
      "model": "local-coder",
      "models": [
        {
          "id": "local-coder",
          "maxInputChars": 4000,
          "tier": "large"
        }
      ]
    },
    "ollama": {
      "enabled": true,
      "paid": false,
      "tier": "free",
      "type": "ollama",
      "baseUrl": "http://localhost:11434",
      "models": [
        {
          "id": "qwen:latest",
          "maxInputChars": 800,
          "tier": "small"
        },
        {
          "id": "qwen14b-tools-32k",
          "maxInputChars": 4000,
          "tier": "large"
        }
      ]
    },
    "groq": {
      "enabled": true,
      "paid": false,
      "tier": "free",
      "type": "openai_compatible",
      "baseUrl": "https://api.groq.com/openai/v1",
      "apiKeyEnv": "GROQ_API_KEY",
      "models": [
        {
          "id": "meta-llama/llama-4-scout-17b-16e-instruct",
          "maxInputChars": 4000
        }
      ]
    },
    "qwen": {
      "enabled": true,
      "paid": false,
      "tier": "free",
      "type": "openai_compatible",
      "baseUrl": "https://portal.qwen.ai/v1",
      "auth": "qwen_oauth",
      "models": [
        {
          "id": "coder-model",
          "maxInputChars": 4000
        }
      ]
    },
    "openai_auth": {
      "enabled": true,
      "paid": false,
      "tier": "auth",
      "type": "openai_auth",
      "readyEnv": "OPENAI_AUTH_READY"
    },
    "claude_auth": {
      "enabled": true,
      "paid": false,
      "tier": "auth",
      "type": "anthropic_auth",
      "readyEnv": "CLAUDE_AUTH_READY"
    },
    "grok_api": {
      "enabled": true,
      "paid": true,
      "tier": "paid",
      "type": "openai_compatible",
      "baseUrl": "https://api.x.ai/v1",
      "apiKeyEnv": "GROK_API_KEY",
      "models": [
        {
          "id": "grok-2",
          "maxInputChars": 6000
        }
      ]
    },
    "openai_api": {
      "enabled": true,
      "paid": true,
      "tier": "paid",
      "type": "openai_compatible",
      "baseUrl": "https://api.openai.com/v1",
      "apiKeyEnv": "OPENAI_API_KEY",
      "models": [
        {
          "id": "gpt-4o-mini",
          "maxInputChars": 6000
        }
      ]
    },
    "claude_api": {
      "enabled": true,
      "paid": true,
      "tier": "paid",
      "type": "anthropic",
      "baseUrl": "https://api.anthropic.com/v1",
      "apiKeyEnv": "ANTHROPIC_API_KEY",
      "models": [
        {
          "id": "claude-3-5-sonnet",
          "maxInputChars": 6000
        }
      ]
    }
  },
  "routing": {
    "free_order": [
      "local_vllm_assistant",
      "ollama",
      "groq",
      "qwen"
    ],
    "rules": [
      {
        "name": "coding_prefers_local_vllm_coder",
        "when": {
          "intent": "coding",
          "task_type": "coding"
        },
        "provider": "local_vllm_coder"
      }
    ],
    "intents": {
      "itc_classify": {
        "order": [
          "free"
        ],
        "fallback": "rules",
        "preferLocalForShort": true,
        "shortMessageChars": 240
      },
      "coding": {
        "order": [
          "local_vllm_coder",
          "local_vllm_assistant",
          "free",
          "openai_auth",
          "claude_auth",
          "grok_api",
          "openai_api",
          "claude_api"
        ],
        "allowPaid": true
      },
      "governance": {
        "order": [
          "claude_auth",
          "claude_api"
        ],
        "allowPaid": true,
        "maxTokensPerRequest": 768
      },
      "security": {
        "order": [
          "claude_auth",
          "claude_api"
        ],
        "allowPaid": true,
        "maxTokensPerRequest": 768
      },
      "conversation": {
        "order": [
          "minimax_m25",
          "minimax_m25_lightning",
          "local_vllm_assistant",
          "openai_gpt52_chat",
          "openai_gpt53_codex",
          "openai_gpt53_codex_spark"
        ],
        "allowPaid": true
      }
    },
    "capability_router": {
      "enabled": true,
      "structureComplexityMinBullets": 3,
      "structureComplexityMinPaths": 2,
      "explicitTriggers": {
        "use chatgpt": "openai_gpt52_chat",
        "use codex": "openai_gpt53_codex"
      },
      "subagentProvider": "local_vllm_assistant",
      "reasoningProvider": "openai_gpt52_chat",
      "codeProvider": "openai_gpt53_codex",
      "smallCodeProvider": "openai_gpt53_codex_spark"
    }
  }
}
