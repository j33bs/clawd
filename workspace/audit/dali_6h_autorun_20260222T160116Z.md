# Dali 6-Hour Autonomous Audit & Repair

- UTC start: 2026-02-22T16:01:16Z
- Branch: codex/chore/dali-6h-autonomous-audit-repair-20260223
- Base HEAD: 005b912e63e2ea7c378c267d2bfc7a99581632f2
- Primary evidence base: `~/.openclaw/workspace/docs/system-audit-20260222.md`

## Objectives
1. Restore local vLLM fallback service health without weakening security.
2. Verify durable pairing guardrails and cron preflight path stability.
3. Apply plugin allowlist hardening.
4. Add bounded log rotation for `/tmp/openclaw` growth.
5. Correct cron payload kind mismatches causing skipped/error runs.
6. Reconcile workspace drift with `~/src/clawd/workspace` as source of truth.
7. Resolve `WORKFLOW_AUTO.md` reference gap appropriately.
8. Run `openclaw doctor --repair` and keep only safe/reversible outcomes.

## Constraints
- Minimal diffs, reversible, evidence-first.
- No disabling pairing/auth, no auto-approve.
- No secrets printed or committed.
- Prefer config/service/docs changes over runtime code changes.

## Kill-Switch Criteria (STOP and ask)
- Any step would expose/rotate secrets.
- Any step would weaken auth/pairing posture.
- Any step would delete user data without backup.
- Any doctor-proposed action is ambiguous or architecture-altering.

## Phase 0 - Baseline & Safety
```bash
$ pwd
/tmp/wt_local_exec_activation

$ git status --porcelain -uall
(no output)

$ git rev-parse --abbrev-ref HEAD
codex/chore/dali-gateway-pairing-preflight-20260223

$ git rev-parse HEAD
005b912e63e2ea7c378c267d2bfc7a99581632f2

$ command -v openclaw && openclaw --version
/home/jeebs/.local/bin/openclaw
2026.2.19-2 build_sha=9325318d0c992f1e5395a7274f98220ca7999336 build_time=2026-02-22T04:58:13Z

$ systemctl --user status openclaw-gateway.service --no-pager
active (running)

$ systemctl --user status openclaw-vllm.service --no-pager || true
inactive (dead); last failure indicates engine core init failure

$ ss -ltnp | grep 18789 || true
LISTEN 127.0.0.1:18789 and [::1]:18789 via openclaw-gateway
```

Decision:
- Proceed. Worktree clean and gateway is stable on loopback.
- vLLM inactive with explicit error evidence; targeted recovery needed.

## Phase 1 - Pairing Guardrails Verification
```bash
$ workspace/scripts/check_gateway_pairing_health.sh
INFO: recent scope-upgrade/pairing-required log lines were found; ensure devices list remains pending-free.
OK: no pending pairing/repair detected.
(exit_code=0)

$ command -v openclaw-cron-preflight
/home/jeebs/.local/bin/openclaw-cron-preflight

$ crontab -l | sed -n "1,120p"
# OpenClaw maintenance
30 2 * * * $HOME/.local/bin/openclaw-cron-preflight -- $HOME/bin/openclaw-backup.sh >> $HOME/.local/state/openclaw/backup.log 2>&1
45 3 * * * $HOME/bin/python-env-audit.sh $HOME/security-audits >> $HOME/.local/state/openclaw/python-audit.log 2>&1
15 4 * * * $HOME/bin/cleanup-temp.sh >> $HOME/.local/state/openclaw/cleanup.log 2>&1
*/5 * * * * $HOME/bin/system-monitor.sh >> $HOME/.local/state/openclaw/monitor-cron.log 2>&1
```
Decision:
- Guardrails healthy: preflight exits 0 and stable shim path is in use (no /tmp wrapper in cron).

## Phase 2 - vLLM Recovery
```bash
$ systemctl --user cat openclaw-vllm.service
ExecStart=/home/jeebs/src/clawd/.venv-vllm/bin/python3.12 ... vllm serve /opt/models/qwen2_5_14b_instruct_awq ... --host 127.0.0.1 --port 8001 --gpu-memory-utilization 0.90 ...

$ ls -la /opt/models/qwen2_5_14b_instruct_awq
(exists; model shards present)

$ manual bounded startup test (timeout 60s)
(model loaded and API server reached 127.0.0.1:8001 before timeout)

$ systemctl --user enable openclaw-vllm.service && restart
$ curl -fsS http://127.0.0.1:8001/health
(HTTP 200, empty body)

$ systemctl --user status openclaw-vllm.service
Active: active (running) since 02:11:07; verified at 10min uptime
```
Decision:
- No service-file argument changes required; prior failure was transient low-free-GPU state. Recovery achieved by controlled restart/enable and validation.

## Phase 3 - Plugin Allowlist Hardening
```bash
$ python inspection of ~/.openclaw/openclaw.json plugins section
plugins.keys = [entries, installs, load], plugins.allow missing

$ backup + set plugins.allow to existing configured entries + restart gateway
plugins.allow set to: [llm-task, minimax-portal-auth, openclaw_secrets_plugin, telegram]
gateway plugin auto-load warning cleared
```
Decision:
- Added explicit allowlist only for already-configured plugins; no privilege broadening.

## Phase 4 - /tmp/openclaw Log Rotation
```bash
$ du -sh /tmp/openclaw (before)
2.4M /tmp/openclaw

$ create ~/.config/logrotate/openclaw-tmp.conf
/tmp/openclaw/openclaw-*.log { daily rotate 7 compress delaycompress missingok notifempty copytruncate }

$ /usr/sbin/logrotate -v -s ~/.local/state/openclaw/logrotate.status ~/.config/logrotate/openclaw-tmp.conf
reading config file /home/jeebs/.config/logrotate/openclaw-tmp.conf
Creating stub state file: /home/jeebs/.local/state/openclaw/logrotate.status
acquired lock on state file /home/jeebs/.local/state/openclaw/logrotate.statusReading state from file: /home/jeebs/.local/state/openclaw/logrotate.status
Allocating hash table for state file, size 64 entries

Handling 1 logs

rotating pattern: /tmp/openclaw/openclaw-*.log  after 1 days (7 rotations)
empty log files are not rotated, old logs are removed
considering log /tmp/openclaw/openclaw-2026-02-22.log
Creating new state
  Now: 2026-02-23 02:22
  Last rotated at 2026-02-23 02:00
  log does not need rotating (log has already been rotated)
considering log /tmp/openclaw/openclaw-2026-02-23.log
Creating new state
  Now: 2026-02-23 02:22
  Last rotated at 2026-02-23 02:00
  log does not need rotating (log has already been rotated)

$ added user cron
50 2 * * * /usr/sbin/logrotate -s $HOME/.local/state/openclaw/logrotate.status $HOME/.config/logrotate/openclaw-tmp.conf >> $HOME/.local/state/openclaw/logrotate.log 2>&1
```

## Phase 5 - Cron Payload Kind Corrections
```bash
$ backup ~/.openclaw/cron/jobs.json
$ openclaw cron edit consciousness-timer-hourly --message ...
$ openclaw cron edit dream-consolidation-nightly --message ...
$ openclaw cron edit 34e55f64-755d-4d01-8bda-6db054126e6e --system-event ...

$ post-edit payload kinds
consciousness-timer-hourly -> agentTurn (isolated)
dream-consolidation-nightly -> agentTurn (isolated)
34e55f64-... (daily-brief-630am) -> systemEvent (main)

$ openclaw cron run (verification)
consciousness-timer-hourly: ok=true ran=true
dream-consolidation-nightly: ok=true ran=true
daily-brief-630am: gateway timeout after 45000ms (no payload.kind contract error)
```
Decision:
- Fixed only payload kind/type contract fields; schedules unchanged.

## Phase 6 - Workspace Drift Reconciliation (Backup-first)
```bash
$ du -sh ~/.openclaw/workspace ~/src/clawd/workspace
500K vs 725M

$ tar backup
/home/jeebs/.openclaw/workspace_backup_20260222T161855Z.tar.gz

$ targeted sync of governance files (non-destructive, no delete)
Synced: AGENTS.md BOOTSTRAP.md CONSTITUTION.md HEARTBEAT.md IDENTITY.md MEMORY.md SOUL.md TOOLS.md USER.md

$ hash check before/after
After sync: SRC and DST hashes match for all listed governance files.
```

## Phase 7 - WORKFLOW_AUTO.md
```bash
$ rg -n "WORKFLOW_AUTO" .
No existing operational document found (only this audit reference).

$ created workspace/WORKFLOW_AUTO.md (minimal automation guardrails)
$ copied to ~/.openclaw/workspace/WORKFLOW_AUTO.md for runtime path compatibility
```

## Phase 8 - openclaw doctor --repair
```bash
$ openclaw doctor --repair
Exit 0. Findings included: gateway token/path recommendations, memory plugin warning, memory-search provider missing.
Doctor suggested "openclaw doctor --fix" for automatic changes.
```
Decision:
- Did NOT run --fix automatically to avoid ambiguous/risky config rewrites without explicit review.

## Phase 9 - System Verification
```bash
$ openclaw status
Gateway loopback and running; sessions active.

$ openclaw health
Telegram ok; agent session store healthy.

$ workspace/scripts/check_gateway_pairing_health.sh
FAIL: Gateway pairing/repair is pending (1008 pairing required likely).

Pending requests:
- request_id=b4497d11-2147-40bb-a96b-07bbb0bbb875 client_id=gateway-client status=<unknown_status> scopes=operator.write

Remediation:
  openclaw devices list --json
  openclaw devices approve <REQUEST_ID>
  # If logs show reason=scope-upgrade, verify required scopes then approve.
(exit_code=2)

$ ~/.local/bin/openclaw-cron-preflight -- echo CRON_SHIM_OK
FAIL: Gateway pairing/repair is pending (1008 pairing required likely).

Pending requests:
- request_id=b4497d11-2147-40bb-a96b-07bbb0bbb875 client_id=gateway-client status=<unknown_status> scopes=operator.write

Remediation:
  openclaw devices list --json
  openclaw devices approve <REQUEST_ID>
  # If logs show reason=scope-upgrade, verify required scopes then approve.
PRECHECK FAILED: gateway pairing/repair pending; aborting job (see guard output above)
(exit_code=2)
```
Decision:
- Fail-closed behavior verified: pending gateway-client repair request is detected and cron shim blocks execution with non-zero exit.
- No auto-approval performed (security constraint preserved).

## Phase 9.1 - Wrapper Exit-Code Repair
- Found and fixed bug in `workspace/scripts/cron_with_gateway_preflight.sh` where failing precheck returned exit 0 due `if ! cmd; then status=$?` inversion semantics.
- New behavior: capture guard exit status explicitly and propagate non-zero codes.

## Phase 10 - Cleanup, Rollback, and Merge Plan

### What changed
- Host/service: re-enabled and restarted `openclaw-vllm.service`; verified active >10m and `/health` responds.
- Host/config: set explicit `plugins.allow` in `~/.openclaw/openclaw.json` to current configured plugins only.
- Host/logging: added `~/.config/logrotate/openclaw-tmp.conf`, executed validation run, and scheduled daily user-cron invocation.
- Host/cron jobs: corrected three job payload kinds (isolated jobs -> `agentTurn`, main job -> `systemEvent`).
- Host/workspace: backup tar + targeted governance file sync into `~/.openclaw/workspace`.
- Repo: fixed cron preflight wrapper exit-code propagation bug; added `workspace/WORKFLOW_AUTO.md`; recorded this audit.

### Remaining blocked/needs operator action
- Pairing guard currently fails closed due pending request:
  - request_id=b4497d11-2147-40bb-a96b-07bbb0bbb875
  - client_id=gateway-client
  - scopes=operator.write
- No auto-approve performed. Manual remediation per policy:
  - `openclaw devices list --json`
  - `openclaw devices approve <REQUEST_ID>`

### Rollback steps
1) Repo changes:
   - `git revert 55be011`
   - `git revert c9732fc`
2) Plugin allowlist:
   - `cp /home/jeebs/.openclaw/openclaw.json.bak.20260222T161312Z /home/jeebs/.openclaw/openclaw.json`
   - `systemctl --user restart openclaw-gateway.service`
3) vLLM service:
   - `systemctl --user disable --now openclaw-vllm.service`
4) Log rotation:
   - remove cron line for logrotate and run `crontab <restored_file>`
   - `rm -f ~/.config/logrotate/openclaw-tmp.conf ~/.local/state/openclaw/logrotate.status`
5) Cron payload kinds:
   - `cp /home/jeebs/.openclaw/cron/jobs.json.bak.20260222T161513Z /home/jeebs/.openclaw/cron/jobs.json`
6) Workspace sync:
   - restore backup: `tar -C ~/.openclaw -xzf /home/jeebs/.openclaw/workspace_backup_20260222T161855Z.tar.gz`

### Merge plan
- Open PR from `codex/chore/dali-6h-autonomous-audit-repair-20260223`.
- Merge only after manual pairing request approval is completed and guard returns exit 0.

## Post-run manual pairing approval + verification (2026-02-23)

- UTC start: 2026-02-22T16:27:40Z
- Branch: codex/chore/dali-6h-autonomous-audit-repair-20260223
- HEAD: 41b0dd23359c9a3546338eaa08043c2791aa96c4

### Phase 1 - Confirm pending state (evidence)
```bash
$ openclaw devices list --json | head -n 240
{
  "pending": [
    {
      "requestId": "b51b9745-f899-4767-9d1a-d398e873e4f3",
      "deviceId": "d59e8530ab5264cdd8fc054743aa677883e0705f191cc4d5f6c3bd5fc07bf301",
      "publicKey": "cciOUMewwV-1Z5hvEFMxwnZ8zo7iMXeu5jMH0GA6jD4",
      "platform": "linux",
      "clientId": "gateway-client",
      "clientMode": "backend",
      "role": "operator",
      "roles": [
        "operator"
      ],
      "scopes": [
        "operator.write"
      ],
      "silent": false,
      "isRepair": true,
      "ts": 1771777605372
    }
  ],
  "paired": [
    {
      "deviceId": "d59e8530ab5264cdd8fc054743aa677883e0705f191cc4d5f6c3bd5fc07bf301",
      "publicKey": "cciOUMewwV-1Z5hvEFMxwnZ8zo7iMXeu5jMH0GA6jD4",
      "platform": "linux",
      "clientId": "cli",
      "clientMode": "cli",
      "role": "operator",
      "roles": [
        "operator"
      ],
      "scopes": [
        "operator.admin",
        "operator.approvals",
        "operator.pairing",
        "operator.read"
      ],
      "createdAtMs": 1771311120916,
      "approvedAtMs": 1771768620670,
      "tokens": [
        {
          "role": "operator",
          "scopes": [
            "operator.admin",
            "operator.approvals",
            "operator.pairing",
            "operator.read"
          ],
          "createdAtMs": 1771311120916,
          "rotatedAtMs": 1771768956600,
          "lastUsedAtMs": 1771484248970
        }
      ]
    },
    {
      "deviceId": "cf4e0b24aeaa879608c15454f8e4976f8ec648c656b06960e41d14618d0b378b",
      "publicKey": "3-6dDf3MCikaZqcnkEpnHd_A2oBwzHTPo_xpsVk_z2k",
      "platform": "Linux x86_64",
      "clientId": "openclaw-control-ui",
      "clientMode": "webchat",
      "role": "operator",
      "roles": [
        "operator"
      ],
      "scopes": [
        "operator.admin",
        "operator.approvals",
        "operator.pairing"
      ],
      "createdAtMs": 1771441549064,
      "approvedAtMs": 1771441549064,
      "tokens": [
        {
          "role": "operator",
          "scopes": [
            "operator.admin",
            "operator.approvals",
            "operator.pairing"
          ],
          "createdAtMs": 1771441549064,
          "lastUsedAtMs": 1771502457549
        }
      ]
    },
    {
      "deviceId": "b3f91ba144ed6ecc1a0140facd0a2c35cac0ba0812951d9e03edc1a59bda89a3",
      "publicKey": "cl6ukD4V4vug0PxZF2HYp9sKon7pcXhHaic_2O4afts",
      "platform": "Linux x86_64",
      "clientId": "openclaw-control-ui",
      "clientMode": "webchat",
      "role": "operator",
      "roles": [
        "operator"
      ],
      "scopes": [
        "operator.admin",
        "operator.approvals",
        "operator.pairing"
      ],
      "createdAtMs": 1771359006652,
      "approvedAtMs": 1771359006652,
      "tokens": [
        {
          "role": "operator",
          "scopes": [
            "operator.admin",
            "operator.approvals",
            "operator.pairing"
          ],
          "createdAtMs": 1771359006652,
          "lastUsedAtMs": 1771668565977
        }
      ]
    }
  ]
}
(exit_code=0)

$ workspace/scripts/check_gateway_pairing_health.sh || true
FAIL: Gateway pairing/repair is pending (1008 pairing required likely).

Pending requests:
- request_id=b51b9745-f899-4767-9d1a-d398e873e4f3 client_id=gateway-client status=<unknown_status> scopes=operator.write

Remediation:
  openclaw devices list --json
  openclaw devices approve <REQUEST_ID>
  # If logs show reason=scope-upgrade, verify required scopes then approve.
(exit_code=2)
```
Observation: request id rotated from earlier value; live pending request at run time was `b51b9745-f899-4767-9d1a-d398e873e4f3` for `gateway-client`.

### Phase 2 - Manual approval + gateway restart
```bash
$ openclaw devices approve b51b9745-f899-4767-9d1a-d398e873e4f3 --json
{
  "requestId": "b51b9745-f899-4767-9d1a-d398e873e4f3",
  "device": {
    "deviceId": "d59e8530ab5264cdd8fc054743aa677883e0705f191cc4d5f6c3bd5fc07bf301",
    "publicKey": "cciOUMewwV-1Z5hvEFMxwnZ8zo7iMXeu5jMH0GA6jD4",
    "platform": "linux",
    "clientId": "gateway-client",
    "clientMode": "backend",
    "role": "operator",
    "roles": [
      "operator"
    ],
    "scopes": [
      "operator.admin",
      "operator.approvals",
      "operator.pairing",
      "operator.read",
      "operator.write"
    ],
    "createdAtMs": 1771311120916,
    "approvedAtMs": 1771777730260,
    "tokens": [
      {
        "role": "operator",
        "scopes": [
          "operator.write"
        ],
        "createdAtMs": 1771311120916,
        "rotatedAtMs": 1771777730260,
        "lastUsedAtMs": 1771484248970
      }
    ]
  }
}
(exit_code=0)

$ systemctl --user restart openclaw-gateway.service
$ systemctl --user status openclaw-gateway.service --no-pager
● openclaw-gateway.service - OpenClaw Gateway (user-owned)
     Loaded: loaded (/home/jeebs/.config/systemd/user/openclaw-gateway.service; enabled; preset: enabled)
    Drop-In: /home/jeebs/.config/systemd/user/openclaw-gateway.service.d
             └─10-provider-lock.conf, 99-userprefix-execstart.conf, override.conf, zzzz-userprefix-execstart.conf
     Active: active (running) since Mon 2026-02-23 02:28:50 AEST; 3ms ago
   Main PID: 125826 (bash)
      Tasks: 2 (limit: 38169)
     Memory: 1.2M (peak: 1.2M)
        CPU: 2ms
     CGroup: /user.slice/user-1000.slice/user@1000.service/app.slice/openclaw-gateway.service
             ├─125826 bash /home/jeebs/.local/bin/openclaw gateway --port 18789
             └─125828 node -e "const fs=require(\"fs\"); const p=process.argv[1]; const k=process.argv[2]; try { const o=JSON.parse(fs.readFileSync(p,\"utf8\")); const v=Object.prototype.hasOwnProperty.call(o,k) ? String(o[k]) : \"\"; process.stdout.write(v); } catch {}" /home/jeebs/.local/share/openclaw-build/version_build.json build_sha

Feb 23 02:28:50 jeebs-Z490-AORUS-MASTER systemd[1643]: Started openclaw-gateway.service - OpenClaw Gateway (user-owned).
```

### Phase 3 - Verification
```bash
$ openclaw devices list --json | head -n 240
{
  "pending": [],
  "paired": [
    {
      "deviceId": "d59e8530ab5264cdd8fc054743aa677883e0705f191cc4d5f6c3bd5fc07bf301",
      "publicKey": "cciOUMewwV-1Z5hvEFMxwnZ8zo7iMXeu5jMH0GA6jD4",
      "platform": "linux",
      "clientId": "cli",
      "clientMode": "cli",
      "role": "operator",
      "roles": [
        "operator"
      ],
      "scopes": [
        "operator.admin",
        "operator.approvals",
        "operator.pairing",
        "operator.read",
        "operator.write"
      ],
      "createdAtMs": 1771311120916,
      "approvedAtMs": 1771777730260,
      "tokens": [
        {
          "role": "operator",
          "scopes": [
            "operator.admin",
            "operator.approvals",
            "operator.pairing"
          ],
          "createdAtMs": 1771311120916,
          "rotatedAtMs": 1771777759101,
          "lastUsedAtMs": 1771484248970
        }
      ]
    },
    {
      "deviceId": "cf4e0b24aeaa879608c15454f8e4976f8ec648c656b06960e41d14618d0b378b",
      "publicKey": "3-6dDf3MCikaZqcnkEpnHd_A2oBwzHTPo_xpsVk_z2k",
      "platform": "Linux x86_64",
      "clientId": "openclaw-control-ui",
      "clientMode": "webchat",
      "role": "operator",
      "roles": [
        "operator"
      ],
      "scopes": [
        "operator.admin",
        "operator.approvals",
        "operator.pairing"
      ],
      "createdAtMs": 1771441549064,
      "approvedAtMs": 1771441549064,
      "tokens": [
        {
          "role": "operator",
          "scopes": [
            "operator.admin",
            "operator.approvals",
            "operator.pairing"
          ],
          "createdAtMs": 1771441549064,
          "lastUsedAtMs": 1771502457549
        }
      ]
    },
    {
      "deviceId": "b3f91ba144ed6ecc1a0140facd0a2c35cac0ba0812951d9e03edc1a59bda89a3",
      "publicKey": "cl6ukD4V4vug0PxZF2HYp9sKon7pcXhHaic_2O4afts",
      "platform": "Linux x86_64",
      "clientId": "openclaw-control-ui",
      "clientMode": "webchat",
      "role": "operator",
      "roles": [
        "operator"
      ],
      "scopes": [
        "operator.admin",
        "operator.approvals",
        "operator.pairing"
      ],
      "createdAtMs": 1771359006652,
      "approvedAtMs": 1771359006652,
      "tokens": [
        {
          "role": "operator",
          "scopes": [
            "operator.admin",
            "operator.approvals",
            "operator.pairing"
          ],
          "createdAtMs": 1771359006652,
          "lastUsedAtMs": 1771668565977
        }
      ]
    }
  ]
}
(exit_code=0)

$ workspace/scripts/check_gateway_pairing_health.sh
INFO: recent scope-upgrade/pairing-required log lines were found; ensure devices list remains pending-free.
OK: no pending pairing/repair detected.
(exit_code=0)

$ ~/.local/bin/openclaw-cron-preflight -- echo CRON_SHIM_OK
INFO: recent scope-upgrade/pairing-required log lines were found; ensure devices list remains pending-free.
OK: no pending pairing/repair detected.
CRON_SHIM_OK
(exit_code=0)

$ openclaw status || true
OpenClaw status

Overview
┌─────────────────┬───────────────────────────────────────────────────────────────────────────────────────────────────┐
│ Item            │ Value                                                                                             │
├─────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Dashboard       │ http://127.0.0.1:18789/                                                                           │
│ OS              │ linux 6.17.0-14-generic (x64) · node 22.22.0                                                      │
│ Tailscale       │ off                                                                                               │
│ Channel         │ stable (default)                                                                                  │
│ Update          │ available · pnpm · npm update 2026.2.21-2                                                         │
│ Gateway         │ local · ws://127.0.0.1:18789 (local loopback) · reachable 16ms · auth token · jeebs-Z490-AORUS-   │
│                 │ MASTER (192.168.0.162) app unknown linux 6.17.0-14-generic                                        │
│ Gateway service │ systemd installed · enabled · running (pid 125826, state active)                                  │
│ Node service    │ systemd not installed                                                                             │
│ Agents          │ 1 · 1 bootstrapping · sessions 13 · default main active 12m ago                                   │
│ Memory          │ 0 files · 0 chunks · sources memory · plugin memory-core · vector unknown · fts ready · cache on  │
│                 │ (0)                                                                                               │
│ Probes          │ skipped (use --deep)                                                                              │
│ Events          │ none                                                                                              │
│ Heartbeat       │ 30m (main)                                                                                        │
│ Sessions        │ 13 active · default MiniMax-M2.5 (200k ctx) · ~/.openclaw/agents/main/sessions/sessions.json      │
└─────────────────┴───────────────────────────────────────────────────────────────────────────────────────────────────┘

Security audit
Summary: 0 critical · 1 warn · 1 info
  WARN Reverse proxy headers are not trusted
    gateway.bind is loopback and gateway.trustedProxies is empty. If you expose the Control UI through a reverse proxy, configure trusted proxies so local-client c…
    Fix: Set gateway.trustedProxies to your proxy IPs or keep the Control UI local-only.
Full report: openclaw security audit
Deep probe: openclaw security audit --deep

Channels
┌──────────┬─────────┬────────┬───────────────────────────────────────────────────────────────────────────────────────┐
│ Channel  │ Enabled │ State  │ Detail                                                                                │
├──────────┼─────────┼────────┼───────────────────────────────────────────────────────────────────────────────────────┤
│ Telegram │ ON      │ OK     │ token config (8517…TcJk · len 46) · accounts 1/1                                      │
└──────────┴─────────┴────────┴───────────────────────────────────────────────────────────────────────────────────────┘

Sessions
┌───────────────────────────────────────────────────────────────┬────────┬─────────┬──────────────┬───────────────────┐
│ Key                                                           │ Kind   │ Age     │ Model        │ Tokens            │
├───────────────────────────────────────────────────────────────┼────────┼─────────┼──────────────┼───────────────────┤
│ agent:main:main                                               │ direct │ 12m ago │ MiniMax-M2.5 │ 112k/200k (56%)   │
│ agent:main:cron:dream-consolida…                              │ direct │ 13m ago │ MiniMax-M2.5 │ 9.0k/200k (4%)    │
│ agent:main:cron:dream-consolida…                              │ direct │ 13m ago │ MiniMax-M2.5 │ 9.0k/200k (4%)    │
│ agent:main:cron:consciousness-t…                              │ direct │ 13m ago │ MiniMax-M2.5 │ 9.0k/200k (4%)    │
│ agent:main:cron:consciousness-t…                              │ direct │ 13m ago │ MiniMax-M2.5 │ 9.0k/200k (4%)    │
│ agent:main:cron:3d7aa458-12a9-4…                              │ direct │ 17h ago │ MiniMax-M2.5 │ unknown/200k (?%) │
│ agent:main:cron:3d7aa458-12a9-4…                              │ direct │ 17h ago │ MiniMax-M2.5 │ unknown/200k (?%) │
│ agent:main:cron:500367aa-d5c7-4…                              │ direct │ 18h ago │ MiniMax-M2.5 │ 9.9k/200k (5%)    │
│ agent:main:cron:500367aa-d5c7-4…                              │ direct │ 18h ago │ MiniMax-M2.5 │ 9.9k/200k (5%)    │
│ agent:main:cron:32bfc7b3-4ea1-4…                              │ direct │ 18h ago │ MiniMax-M2.5 │ 9.4k/200k (5%)    │
└───────────────────────────────────────────────────────────────┴────────┴─────────┴──────────────┴───────────────────┘

FAQ: https://docs.openclaw.ai/faq
Troubleshooting: https://docs.openclaw.ai/troubleshooting

Update available (npm 2026.2.21-2). Run: openclaw update

Next steps:
  Need to share?      openclaw status --all
  Need to debug live? openclaw logs --follow
  Need to test channels? openclaw status --deep

$ openclaw health || true
Telegram: ok (@jeebsdalibot) (2336ms)
Agents: main (default)
Heartbeat interval: 30m (main)
Session store (main): /home/jeebs/.openclaw/agents/main/sessions/sessions.json (13 entries)
- agent:main:main (12m ago)
- agent:main:cron:dream-consolidation-nightly (13m ago)
- agent:main:cron:dream-consolidation-nightly:run:09b52aaa-9e27-4b46-b4d4-17f3c85fff66 (13m ago)
- agent:main:cron:consciousness-timer-hourly (13m ago)
- agent:main:cron:consciousness-timer-hourly:run:f6f02e35-4060-4144-aebf-7e23d1a8a641 (13m ago)

$ journalctl --user -u openclaw-gateway.service --since '2026-02-22T16:28:50Z' --no-pager | grep -E 'pairing required|scope-upgrade' || true
```

Acceptance results:
- pairing preflight guard exit 0: PASS
- cron shim dry-run prints CRON_SHIM_OK and exits 0: PASS
- no new pairing required/scope-upgrade lines after approval timestamp: PASS

### Merge Readiness
- Branch: `codex/chore/dali-6h-autonomous-audit-repair-20260223`
- HEAD: `41b0dd23359c9a3546338eaa08043c2791aa96c4` (baseline for this post-run step)
- Pending pairing queue: empty
- Guards passing: yes
- Gateway stable: yes (status + health healthy)
- vLLM quick health: `curl -sf http://127.0.0.1:8001/health` -> exit 0 (VLLM_OK)
