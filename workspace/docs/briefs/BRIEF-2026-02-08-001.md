# Change Brief: Remove Tracked Secrets + Provider Misconfig

## Metadata
- **ID**: BRIEF-2026-02-08-001
- **Category**: B
- **Author**: codex
- **Date**: 2026-02-08
- **Branch**: develop

---

## Summary
Remove Groq API keys from tracked configs, disable Groq in agent model config, and fix claude-code Ollama baseUrl to prevent 404s.

---

## Motivation
Tracked secrets violate security policy and create leakage risk. Groq is incorrectly enabled for agent routing and has caused request-size failures. Claudecodeâ€™s Ollama baseUrl is missing `/v1`, causing local fallback 404s.

---

## Risk Assessment

### Reversibility
- [x] Easy - Can revert with single commit
- [ ] Moderate - Requires multiple steps to revert
- [ ] Hard - May have cascading effects

### Blast Radius
Agents and provider configuration only.

| File | Change Type |
|------|-------------|
| `openclaw.json` | Modify |
| `agents/main/agent/models.json` | Modify |
| `agents/claude-code/agent/models.json` | Modify |

### Security Impact
- [ ] None - No security implications
- [ ] Low - Minor security consideration
- [ ] Medium - Security review required
- [x] High - Affects authentication, authorization, or data protection

---

## Files Touched

| File | Action | Rationale |
|------|--------|-----------|
| `openclaw.json` | MODIFY | Remove Groq secret from tracked config; keep provider disabled |
| `agents/main/agent/models.json` | MODIFY | Remove Groq secret + disable Groq for agent routing |
| `agents/claude-code/agent/models.json` | MODIFY | Fix Ollama baseUrl to `/v1` |

---

## Implementation Plan

1. Remove Groq API key from tracked configs and disable Groq provider for agent use.
2. Fix claude-code Ollama baseUrl to `/v1` to avoid 404s.
3. Add a verification script and run regression/verify.

---

## Rollback Plan

Revert the commit.

```bash
git revert <commit>
```

---

## Regression Scope

### Automated Validation
- [x] Must pass: `scripts/regression.sh`
- [x] Must pass: `scripts/verify.sh`

### Manual Checks
- [ ] `rg -n "gsk_|sk-ant" -S openclaw.json agents/main/agent/models.json` returns no secrets
- [ ] `openclaw doctor` (optional, local)

---

## Admission Checklist

- [ ] Brief complete with all sections filled
- [ ] Branch created with correct prefix
- [ ] Implementation follows existing patterns
- [ ] Regression validation passed
- [ ] No secrets in diff
- [ ] Category/branch aligned
- [ ] Governance log entry prepared (for Category A/B)
- [ ] Rollback plan tested (for Category A/B)

---

## Notes

Groq remains available for the classifier via `secrets.env`; it is removed from agent routing to avoid TPM failures.

---

*Template version: 1.0*
*See CONTRIBUTING.md for category definitions and admission process.*
